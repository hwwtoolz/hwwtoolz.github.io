(window.klaviyoOnsiteJSONP=window.klaviyoOnsiteJSONP||[]).push([[4],{"../forms/src/Client/Components/FormComponents/Label.tsx":function(e,t,n){"use strict";var o=n("../../node_modules/preact/compat/dist/compat.module.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("../forms/src/Client/Components/ResetElements/index.tsx");const a=["children"];function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const s=Object(r.c)(i.g).withConfig({displayName:"Label__StyledLabel",componentId:"sc-1rnoozl-0"})(["&&{color:",";font-family:",";font-size:",";font-weight:",";letter-spacing:","px;padding-bottom:6px;}"],({theme:{inputStyles:{textStyles:e}}})=>e.color,({theme:{inputStyles:{textStyles:e}}})=>e.fontFamily,({theme:{inputStyles:{textStyles:e}}})=>e.fontSize,({theme:{inputStyles:{textStyles:e}}})=>e.labelFontWeight,({theme:{inputStyles:{textStyles:e}}})=>e.letterSpacing);t.a=e=>{let{children:t}=e,n=l(e,a);return t?o.default.createElement(s,n," ",t):null}},"../forms/src/Client/Components/FormComponents/RichText/QuillContainer.tsx":function(e,t,n){"use strict";var o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../forms/src/Constants/components.ts");const i=o.c.div.attrs({className:`${r.o} ${r.l}`}).withConfig({displayName:"QuillContainer__StyledQuillContainer",componentId:"sc-nxgzcv-0"})(["&&{&&&&{width:100%;.ql-editor{align-self:flex-start;padding:0;}.ql-container{border:none;p,a{font-size:14px;}}.ql-clipboard{display:none;}}}"]);t.a=i},"../forms/src/Client/Components/FormComponents/ValidationMessage.tsx":function(e,t,n){"use strict";var o=n("../../node_modules/preact/compat/dist/compat.module.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("../forms/node_modules/react-redux/es/index.js"),a=n("../forms/src/Client/Components/ResetElements/index.tsx"),l=n("../forms/src/Client/formValidation/isRequired.ts"),s=n("../forms/src/Client/formValidation/email.ts"),c=n("../forms/src/Client/formValidation/date.ts"),d=n("../forms/src/Client/formValidation/phoneNumber.ts"),m=n("../forms/src/Constants/components.ts"),u=n("../forms/src/NewStore/index.ts");const p=Object(r.c)(a.b).withConfig({displayName:"ValidationMessage__Container",componentId:"sc-ja3t6w-0"})(["&&{width:100%;position:relative;}"]),f=Object(r.c)(a.b).withConfig({displayName:"ValidationMessage__ValidationContainer",componentId:"sc-ja3t6w-1"})(["&&{border-radius:4px;box-shadow:1px 1px 4px 0 rgba(0,0,0,0.26);border:1px solid ",";background-color:rgb(248,236,233);&:after,&:before{content:'';display:block;position:absolute;width:0;height:0;border-style:solid;}&:after{",";left:8px;border-width:8px;}&:before{border-width:9px;left:7px;",";}}"],({theme:e})=>e.inputStyles.textStyles.errorColor,({$validateTop:e})=>e?"\n        bottom: -15px;\n        border-color: rgb(248, 236, 233) transparent transparent transparent;\n      ":"\n        top: -15px;\n        border-color: transparent transparent rgb(248, 236, 233) transparent;\n    ",({$validateTop:e,theme:t})=>e?`\n        bottom: -17px;\n        border-color: ${t.inputStyles.textStyles.errorColor} transparent transparent transparent;\n      `:`\n        top: -17px;\n        border-color: transparent transparent ${t.inputStyles.textStyles.errorColor} transparent;\n    `),b=Object(r.c)(a.b).withConfig({displayName:"ValidationMessage__ValidationContainerOuter",componentId:"sc-ja3t6w-2"})(["&&{background-color:white;position:absolute;z-index:1;",";right:0;border-radius:4px;-webkit-animation:fadein 0.4s;-moz-animation:fadein 0.4s;-ms-animation:fadein 0.4s;-o-animation:fadein 0.4s;animation:fadein 0.4s;@keyframes fadein{from{opacity:0;}to{opacity:1;}}@-moz-keyframes fadein{from{opacity:0;}to{opacity:1;}}@-webkit-keyframes fadein{from{opacity:0;}to{opacity:1;}}@-ms-keyframes fadein{from{opacity:0;}to{opacity:1;}}}"],({$validateTop:e})=>e?"bottom: 47px":"top: 9px"),g=Object(r.c)(a.i).withConfig({displayName:"ValidationMessage__FormStyledValidationMessage",componentId:"sc-ja3t6w-3"})(["&&{font-size:14px;padding:8px;font-family:",";color:",";}"],({theme:e})=>e.inputStyles.textStyles.fontFamily,({theme:e})=>e.inputStyles.textStyles.errorColor);t.a=({formVersionCId:e,componentInstance:t,componentAriaID:n})=>{const r=Object(i.c)(t=>u.q.getFormVersionFormTypeDirection(t,u.u.getOpenFormVersionFormVersionId(t,e))),a=!(null==r||!r.startsWith("BOTTOM"));return o.default.createElement(p,null,(null==t?void 0:t.validationErrorType)&&o.default.createElement(b,{$validateTop:a},o.default.createElement(f,{$validateTop:a},o.default.createElement(g,{role:"alert",id:n},(({validationErrorType:e,metadata:t})=>{var n;switch(e){case l.b:return"This field is required";case s.b:return"Please enter a valid email address";case c.b:return`Please enter a valid date format (${null===(n=m.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(null==t?void 0:t.format)))||void 0===n?void 0:n.label.replace(/ /g,(null==t?void 0:t.delimiter)||"/")})`;case d.b:return"Please enter a valid phone number";default:return""}})(t)))))}},"../forms/src/Client/Components/ResetElements/CleaveInput.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("../../node_modules/preact/compat/dist/compat.module.js"),r=n("../forms/src/Constants/components.ts");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const a=o.default.lazy(()=>n.e(13).then(n.t.bind(null,"../../node_modules/cleave.js/react.js",7))),l=e=>o.default.createElement(o.Suspense,{fallback:o.default.createElement("div",null)},o.default.createElement(a,i({},e,{className:`needsclick ${e.className} ${r.o}`})))},"../forms/src/Client/Components/ResetElements/index.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return b})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"k",(function(){return y})),n.d(t,"g",(function(){return O}));var o=n("../../node_modules/preact/compat/dist/compat.module.js"),r=n("../forms/src/Constants/components.ts");n("../forms/src/Client/Components/ResetElements/reset.scss");const i=["tabIndex","className","alt"],a=["tabIndex","className","alt"];function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const c=o.default.forwardRef((e,t)=>o.default.createElement("div",s({ref:t},e,{className:`needsclick ${e.className} ${r.o}`}))),d=o.default.forwardRef((e,t)=>o.default.createElement("form",s({ref:t},e,{className:`needsclick ${e.className} ${r.o}`}))),m=o.default.forwardRef((e,t)=>o.default.createElement("button",s({ref:t},e,{className:`needsclick ${e.className} ${r.o}`}),e.children)),u=o.default.forwardRef((e,t)=>o.default.createElement("p",s({ref:t},e,{className:`needsclick ${e.className} ${r.o}`}))),p=o.default.forwardRef((e,t)=>o.default.createElement("img",s({ref:t},e,{className:`needsclick ${e.className} ${r.o}`}))),f=o.default.forwardRef((e,t)=>o.default.createElement("span",s({ref:t},e,{className:`needsclick ${e.className} ${r.o}`}))),b=o.default.forwardRef((e,t)=>o.default.createElement("svg",s({ref:t},e,{className:`needsclick ${e.className} ${r.o}`}))),g=o.default.forwardRef((e,t)=>o.default.createElement("input",s({ref:t},e,{className:`notranslate needsclick ${e.className} ${r.o}`}))),h=e=>{let{tabIndex:t,className:n,alt:r}=e,a=l(e,i);return o.default.createElement(m,{type:"button",tabIndex:t,className:n},o.default.createElement(p,s({alt:r},a)))},y=e=>{let{tabIndex:t,className:n,alt:r}=e,i=l(e,a);return o.default.createElement(m,{tabIndex:t,className:n},o.default.createElement(b,s({role:"img"},i),i.children))},O=o.default.forwardRef((e,t)=>o.default.createElement("label",s({ref:t},e,{className:`needsclick ${e.className} ${r.o}`})))},"../forms/src/Client/Render.tsx":function(e,t,n){"use strict";n.r(t);var o=n("../../node_modules/preact/compat/dist/compat.module.js"),r=n("../forms/node_modules/react-redux/es/index.js"),i=n("../forms/src/NewStore/store.ts"),a=n("../../node_modules/react-portal/es/PortalWithState.js"),l=(n("../../node_modules/core-js/modules/web.dom.iterable.js"),n("../../node_modules/styled-components/dist/styled-components.browser.esm.js")),s=n("../forms/src/Constants/defaultTheme/view.ts"),c=n("../forms/src/Client/Components/ResetElements/index.tsx"),d=n("../forms/src/Constants/formTypes.ts");var m=n("../forms/src/Constants/designer.ts");var u=n("../../node_modules/lodash-es/uniqueId.js"),p=n("../forms/src/NewStore/index.ts"),f=n("../forms/src/Constants/actions.ts"),b=n("../forms/src/Utils/debug.ts");class g{constructor({formVersionCId:e,actionId:t}){this.currentHandlerStep="INSTANTIATED",this.formActionType=void 0,this.actionId=void 0,this.formVersionCId=void 0,this.formAction=void 0,this.formId=void 0,this.companyId=void 0,this.actionId=t,this.formVersionCId=e,this.formAction=p.b.actionSelectById(i.a.getState(),t);const n=i.a.getState();this.formId=p.u.getOpenFormVersionFormId(n,e),this.companyId=p.e.getKlaviyoCompanyId(n)}runAction(){return this.currentHandlerStep="PREHANDLER",new Promise(e=>e()).then(e=>this.__preHandler(e)).then(e=>(this.currentHandlerStep="HANDLER",e)).then(e=>this.__handler(e)).then(e=>(this.currentHandlerStep="POSTHANDLER",e)).then(e=>this.__postHandler(e)).catch(e=>this.__errorHandler(e))}__preHandler(e){}__handler(e){}__postHandler(e){}__errorHandler(e){Object(b.a)(e.toString(),{formActionType:this.formActionType,currentHandlerStep:this.currentHandlerStep})}}const h=["isSubmit"];function y(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}class O extends g{constructor(e){let{isSubmit:t}=e;super(y(e,h)),this.isSubmit=void 0,this.isSubmit=t,this.formActionType=f.a}__handler(){return i.a.dispatch(p.u.closeForm({formVersionCId:this.formVersionCId,logMetric:!this.isSubmit}))}}O.formActionType=f.a;var v=O,w=n("../forms/src/Utils/errorTypes.ts"),I=n("../forms/src/Utils/promise.ts"),x=n("../forms/src/Utils/onsiteApi/learnq.ts"),j=n("../forms/src/NewStore/logMetricAsync/actions.ts");var C=()=>{},S={baseStyle:({theme:e,disabled:t})=>Object(l.b)(["cursor:",";font-family:",";text-decoration:none;:hover{text-decoration:",";}"],t?"default":"pointer",e.klFontFamily,!t&&"underline"),variants:{default:({theme:e,disabled:t})=>Object(l.b)(["color:",";font-size:",";font-weight:",";"],t?e.klGray:e.klPrimary,e.klFontMedium,e.fontWeightNormal),dataTable:({theme:e,disabled:t})=>Object(l.b)(["color:",";font-size:",";font-weight:",";"],t?e.klGray:e.klPrimary,e.klFontMedium,e.fontWeightSemibold),dataTableSubdued:({theme:e,disabled:t})=>Object(l.b)(["color:",";font-size:",";font-weight:",";:hover{color:",";}"],t?e.klGray:e.klGrayDarkest,e.klFontMedium,e.fontWeightSemibold,!t&&e.klGrayDarkest),caption:({theme:e,disabled:t})=>Object(l.b)(["color:",";font-size:",";font-weight:",";"],t?e.klGray:e.klPrimary,e.klFontSmall,e.fontWeightNormal),captionDanger:({theme:e,disabled:t})=>Object(l.b)(["color:",";font-size:",";font-weight:",";:hover{color:",";}"],t?e.klGray:e.klDanger,e.klFontSmall,e.fontWeightNormal,e.klDanger)}};l.c.a.withConfig({displayName:"Link__StyledLink",componentId:"sc-16x1a8g-0"})(["",";",";"],S.baseStyle,({type:e="default"})=>S.variants[e]);const k=["className","iconName","iconSize","display","prefix","rotate","color"];function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _=Object(l.c)(e=>{let{className:t,iconName:n,iconSize:r,display:i,prefix:a="kl",rotate:l=0,color:s}=e,c=$(e,k);C("Icon");const d=`${t} ${a} ${a}-${n} ${0!==l?`${a}-rotate-${l}`:""}`.trim();return o.default.createElement("i",E({role:"img",className:d},c))}).withConfig({displayName:"Icon__StyledIcon",componentId:"sc-t6tzq9-0"})(["&:before{font-size:",";display:",";",";}"],e=>e.iconSize||e.theme.klFontMedium,e=>e.display||"inline-block",({color:e,theme:t})=>e?"color: "+t[e]:"");Object(l.c)(e=>o.default.createElement(_,e)).withConfig({displayName:"validations__LinkIcon",componentId:"sc-1qgkl04-0"})(["&&{padding-left:",";}"],({theme:e})=>e.spacingXXSmall);var T=n("../forms/src/Constants/metrics.ts"),V=n("../../node_modules/unfetch/dist/unfetch.mjs"),P=n("../config/lib/client.json");const D=`${P.API.url}${P.API.submitToListPath}`;var F=n("../../node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),N=n("../forms/src/Sentry.tsx"),A=n("../forms/src/Utils/camelizeKeys.ts");const M=P.API.url+"/ajax/sms/subscribe_unique_id";var W=class extends g{constructor(e){super(e),this.hiddenFieldsComponentId=void 0,this.composedFields=void 0;const t=i.a.getState();this.hiddenFieldsComponentId=p.i.getComponentIdByActionId(t,e.actionId),this.composedFields=p.u.getComposedFields(t,this.formVersionCId,this.hiddenFieldsComponentId)}async __preHandler(){const e=await i.a.dispatch(p.u.validateOpenFormVersion({formVersionCId:this.formVersionCId}));if(Object(F.e)(e)){const{components:t}=e.payload;if(t.some(({valid:e})=>!e))throw new w.c({type:"form"})}return!0}__requestUniqueID(){(e=>{const t={method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(Object(A.b)(e))};return Object(V.a)(M,t).then(e=>{if(e.status>=500)throw Error("Error sending request: "+e.url);return e}).then(e=>e.json()).then(e=>Object(A.a)(e))})({companyId:this.companyId,form_id:this.formId,email:this.composedFields.$email}).then(({data:{uniqueId:e}})=>{void 0!==e&&i.a.dispatch(p.e.slice.actions.setSmsSubscriptionUniqueId(e))}).catch(()=>{})}__errorHandler(e){const{composedFields:t,formId:n,companyId:o,formAction:r}=this;if(g.prototype.__errorHandler.call(this,e),(e=>[w.a,w.c].some(t=>e instanceof t))(e))throw e;i.a.dispatch(p.u.updateCurrentView({id:this.formVersionCId,changes:{showErrorView:!0}})),i.a.dispatch(Object(j.a)({metric:T.c,formId:n,companyId:o,submittedFields:t,listId:null==r?void 0:r.listId})),N.a.captureException(e,{tags:{onSubmit:!0},extra:{submitAction:!0,formId:this.formId,companyId:this.companyId}})}};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=class extends W{__handler(){const e=i.a.getState();Object(x.a)(this.composedFields);const t=p.u.getSubscriptionOnlyComponentData(e,this.formVersionCId);return this.composedFields=R(R({},this.composedFields),t||{}),p.i.anyComponentHasSubscribeToSMSAction(e,p.u.getOpenFormVersionFormVersionId(e,this.formVersionCId))&&this.__requestUniqueID(),this.__submitToList()}__submitHandlerCheck({success:e,errors:t=[]}){const{composedFields:n,formId:o,companyId:r,formAction:a}=this;if(!e&&"List does not exist."!==t[0])throw i.a.dispatch(p.u.updateCurrentView({id:this.formVersionCId,changes:{showErrorView:!0}})),i.a.dispatch(Object(j.a)({metric:T.c,formId:o,companyId:r,submittedFields:n,listId:a.listId})),new w.a(t.join(" | "))}__submitToList(){const{composedFields:e,formId:t,companyId:n}=this;return(e=>Object(V.a)(D,{method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:e.toString()}))(this.__makePOSTBody({composedFields:e})).then(e=>e.json()).then(o=>o.success&&this.formAction.actionType?(i.a.dispatch(p.l.slice.actions.successForm({formId:t,successActionType:this.formAction.actionType})),Object(I.b)(200,i.a.dispatch(Object(j.a)({metric:T.h,logCustomEvent:!0,formId:t,companyId:n,submittedFields:e,action_type:"Submit Form"}))).then(()=>o).catch(()=>o)):o)}__makePOSTBody({composedFields:e}){const t=new Date,n=R(R({},e),"object"==typeof window.Shopify&&window.Shopify.shop?{services:JSON.stringify({shopify:{source:"form"}})}:{}),{$exchange_id:o}=Object(x.c)(),r=R(R({g:this.formAction.listId,$fields:Object.keys(n).toString(),$list_fields:Object.keys(n).filter(e=>Array.isArray(n[e])).toString(),$timezone_offset:-t.getTimezoneOffset()/60},n),o?{$exchange_id:o}:{}),i=new URLSearchParams;return Object.keys(r).forEach(e=>{const t=r[e];return Array.isArray(t)?t.forEach(t=>i.append(e,t)):i.set(e,t)}),i}};class B extends L{__postHandler({success:e,errors:t=[]}){return p.u.openFormVersionSelectIds(i.a.getState()).includes(this.formVersionCId)&&this.formAction.viewId?(this.__submitHandlerCheck({success:e,errors:t}),i.a.dispatch(p.u.updateCurrentView({id:this.formVersionCId,changes:{currentViewId:this.formAction.viewId}}))):null}}B.formActionType=f.f;var q=B;const U=["isSubmit"];function G(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}class J extends g{constructor(e){var t,n;let{isSubmit:o}=e;super(G(e,U)),this.redirectUrl=void 0,this.newWindow=void 0,this.isSubmit=void 0,this.redirectUrl=(null===(t=this.formAction.data)||void 0===t?void 0:t.redirectUrl)||"about:blank",this.newWindow=!(null===(n=this.formAction.data)||void 0===n||!n.newWindow)&&this.formAction.actionType===f.b,this.isSubmit=!!o,this.formActionType=f.b}__redirectUrl(){const e=this.redirectUrl.replace(/^javascript:/,"");if(this.newWindow&&this.formAction.actionType===f.b){const t=window.open(e,"_blank");null==t||t.focus()}else window.location.assign(e)}__handler(){const{formId:e,newWindow:t,formVersionCId:n}=this;this.formAction.actionType===f.b&&i.a.dispatch(p.l.slice.actions.successForm({formId:e,successActionType:f.b}));const o=p.u.getOpenFormVersionSentSubmitMetric(i.a.getState(),n),r=i.a.dispatch(Object(j.a)({metric:T.g,logTelemetric:!this.isSubmit&&!o,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Go to URL",destination_url:this.redirectUrl}));return t?(this.__redirectUrl(),r):Object(I.b)(200,r).then(()=>this.__redirectUrl()).catch(()=>this.__redirectUrl())}}J.formActionType=f.b;var K=J;class Q extends L{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:n,actionId:o}=this;return new K({formVersionCId:n,actionId:o,isSubmit:!0}).runAction()}}Q.formActionType=f.e;var Y=Q;class X extends L{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:n,actionId:o}=this;return new v({formVersionCId:n,actionId:o,isSubmit:!0}).runAction()}}X.formActionType=f.d;var Z=X;const ee=e=>"This form is now set to display on Mobile devices only and subscribers will be routed to the list set on the "+e.toLowerCase()+" keyword.",te=e=>e+" Keyword",ne=e=>e+" Message";ee("Opt-in"),te("Opt-in"),ne("Opt-in"),ee("Subscribe"),te("Subscribe"),ne("Subscribe");class oe extends g{constructor(e){var t,n,o;super(e),this.toPhoneNumber=void 0,this.optInMessage=void 0,this.optInKeyword=void 0,this.toPhoneNumber=null===(t=this.formAction.data)||void 0===t?void 0:t.toPhoneNumber,this.optInMessage=(null===(n=this.formAction.data)||void 0===n?void 0:n.optInMessage)||"Send this text to subscribe to SMS updates!",this.optInKeyword=(null===(o=this.formAction.data)||void 0===o?void 0:o.optInKeyword)||"JOIN",this.formActionType=f.g}__handler(){const e=p.e.getSmsSubscriptionUniqueId(i.a.getState()),t=function(e){return e&&6===e.length}(e)?`${this.optInKeyword}:${e}`:this.optInKeyword,n=`sms:${this.toPhoneNumber}?&body=${encodeURIComponent(`${this.optInMessage} (ref:${t})`)}`;i.a.dispatch(p.u.closeForm({formVersionCId:this.formVersionCId}));const o=i.a.dispatch(Object(j.a)({metric:T.i,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Subscribe Via SMS",sms_keyword:this.optInKeyword,destination_url:n}));return Object(I.b)(200,o).then(()=>window.location.assign(n)).catch(()=>window.location.assign(n))}}oe.formActionType=f.g;var re=oe;class ie extends W{__handler(){const{formVersionCId:e,formAction:t,composedFields:n,formId:o,companyId:r}=this,a=i.a.getState();if(!p.u.openFormVersionSelectIds(a).includes(e)||null==t||!t.viewId)return null;Object(x.a)(n);const l=p.u.getOpenFormVersionFormVersionId(a,e);p.i.anyComponentHasSubscribeToSMSAction(a,l)&&this.__requestUniqueID();return!!Object.keys(p.u.getInputComponentFields(a,e)).length&&p.i.shouldTriggerProfileSubmitMetric(a,l)&&i.a.dispatch(Object(j.a)({metric:T.h,logCustomEvent:!0,formId:o,companyId:r,submittedFields:n,action_type:"Submit Form"})),i.a.dispatch(p.u.updateCurrentView({id:e,changes:{currentViewId:t.viewId}}))}}ie.formActionType=f.h;var ae=ie;const le={[v.formActionType]:v,[q.formActionType]:q,[ae.formActionType]:ae,[K.formActionType]:K,[Z.formActionType]:Z,[Y.formActionType]:Y,[re.formActionType]:re},se=({actionId:e,formVersionCId:t})=>{const n=i.a.getState(),o=p.b.getActionType(n,e),r=p.u.getInputComponentFields(n,t),a=r.$email||r.$phone_number;return o!==q.formActionType||a?le[o]:ae};var ce=n("../../node_modules/lodash-es/merge.js"),de=n("../forms/src/Constants/defaultTheme/formComponent.ts"),me=n("../forms/src/Constants/components.ts"),ue=n("../forms/src/Client/Components/FormComponents/RichText/QuillContainer.tsx");var pe=({componentId:e})=>{const t=Object(r.c)(t=>p.i.getComponentQuillHTML(t,e));return t?o.default.createElement(ue.a,{dangerouslySetInnerHTML:{__html:t}}):null};var fe=(e,t=(()=>o.default.createElement(o.default.Fragment,null)))=>{function n(n){const[r,i]=o.default.useState(0),a=o.default.useCallback(()=>i(e=>e<5?e+1:e),[]),l=o.default.useMemo(()=>o.default.lazy(()=>e().catch(()=>({default:()=>(a(),o.default.createElement(o.default.Fragment,null))}))),[e,r]);return o.default.createElement(o.default.Suspense,{fallback:o.default.createElement(t,null)},o.default.createElement(l,n))}return n.displayName="LazyLoader",n};const be=fe(()=>Promise.all([n.e(0),n.e(14),n.e(6)]).then(n.bind(null,"../forms/src/Client/Components/FormComponents/RichText/RichText.tsx")));var ge=({componentId:e,formVersionCId:t})=>{const n=Object(r.c)(t=>p.i.getComponentQuillHTML(t,e))?pe:be;return o.default.createElement(n,{componentId:e,formVersionCId:t})};const he=["children","actionId","formVersionCId"];function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var we=e=>{let{children:t,actionId:n,formVersionCId:i}=e,a=ve(e,he);const[l,s]=Object(o.useState)(!1),c=Object(r.c)(e=>n?p.b.getAriaPropsFromFormAction(e,n):{});return t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onClick:n?()=>{if(n){const e=se({actionId:n,formVersionCId:i}),t=new e({actionId:n,formVersionCId:i});f.c.has(e.formActionType)&&s(!0),t.runAction().catch(()=>{s(!1);const e=document.querySelector(`.klaviyo-form-version-cid_${i} [aria-invalid="true"]`);e&&e.focus()})}}:void 0,handlingFormAction:l,ariaProps:c},a))},Ie=({$showSpinner:e,$showOverlay:t})=>e?`\n      ${t?"&:before {\n              content: '';\n              display: block;\n              top: 0;\n              left: 0;\n              position: absolute;\n              background-color: black;\n              width: 100%;\n              height: 100%;\n              opacity: 0.5;\n              }":""}\n      &:after {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 20px;\n        height: 20px;\n        margin-top: -10px;\n        margin-left: -10px;\n        border-radius: 50%;\n        border: 3px solid transparent;\n        border-top-color: #fff;\n        border-left-color: #fff;\n        animation: spinner 1s linear infinite;\n      }\n\n      @keyframes spinner {\n        to {transform: rotate(360deg);}\n      }\n      `:"";const xe=["width","hasAction"];function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Ce(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Se=()=>null,ke=Object(l.c)(e=>{let{width:t,hasAction:n}=e,r=Ce(e,xe);return n?o.default.createElement(c.d,r):o.default.createElement(c.e,r)}).withConfig({displayName:"Image__ImageContent",componentId:"sc-3o80ip-0"})(["&&{&,img{max-width:100%;width:",";height:",";cursor:",";}&:focus{box-shadow:0 0 5px ",";}}"],({width:e})=>e+"px",({$imageRatio:e,width:t})=>t?"auto":t*e+"px",({$showCursor:e})=>e?"pointer":"initial",({theme:e})=>e.focusColor),Ee=Object(l.c)(c.b).withConfig({displayName:"Image__SpinnerContainer",componentId:"sc-3o80ip-1"})(["&&{position:relative;display:flex;align-items:center;width:100%;height:auto;",";}"],Ie),$e=Object(l.c)(c.b).withConfig({displayName:"Image__ImageContainer",componentId:"sc-3o80ip-2"})(["&&{display:flex;align-items:center;width:100%;height:auto;}"]);var _e=({formVersionCId:e,componentId:t})=>{const n=Object(r.c)(p.e.isDesignWorkflow),i=Object(r.c)(e=>p.i.getComponentStyling(e,t)),a=Object(r.c)(e=>p.i.getComponentImage(e,t)),l=Object(r.c)(e=>p.i.getComponentAltText(e,t)),s=Object(r.c)(e=>p.i.getComponentActionId(e,t));return o.default.createElement($e,null,n&&!a?o.default.createElement(Se,null):a&&o.default.createElement(we,{actionId:s,formVersionCId:e},({onClick:e,handlingFormAction:t,ariaProps:r})=>o.default.createElement(Ee,{onClick:e,$showSpinner:t},o.default.createElement(ke,je({$imageRatio:a.height/a.width,width:i.width||100,src:a.url,alt:l,$showCursor:!!e,hasAction:!!s,tabIndex:n||!s?-1:0},r)))))},Te=n("../forms/src/Client/Components/ResetElements/CleaveInput.tsx"),Ve=n("../forms/src/Client/Components/FormComponents/Label.tsx"),Pe=n("../forms/src/Client/Components/FormComponents/ValidationMessage.tsx");const De=["componentType"];function Fe(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Ne=Object(l.c)(e=>{let{componentType:t}=e,n=Fe(e,De);return t===me.c?o.default.createElement(Te.a,n):o.default.createElement(c.f,n)}).withConfig({displayName:"TextInput__FormStyledTextInput",componentId:"sc-1ydur12-0"})(["&&{&&&{box-sizing:border-box;border-radius:2px;padding-left:16px;padding-right:0px;padding-top:0px;padding-bottom:0px;height:","px;text-align:left;color:",";font-family:",";font-size:",";font-weight:",";letter-spacing:","px;background-color:",";border:1px solid;border-color:",";&:hover{border-color:",";}&:focus{border:1px solid ",";box-shadow:0 0 5px ",";}::placeholder{color:",";font-family:",";font-size:",";font-weight:",";letter-spacing:","px;}::-moz-placeholder{line-height:","px;}::-moz-placeholder{line-height:","px;}}}"],({theme:e})=>e.inputStyles.textStyles.height,({theme:e})=>e.inputStyles.textStyles.formInputTextColor,({theme:e})=>e.inputStyles.textStyles.fontFamily,({theme:e})=>e.inputStyles.textStyles.fontSize,({theme:e})=>e.inputStyles.textStyles.fontWeight,({theme:e})=>e.inputStyles.textStyles.letterSpacing,({theme:e})=>e.inputStyles.inputBackgroundColor,({valid:e,theme:t})=>t.inputStyles.border[e?"defaultColor":"errorColor"],({theme:e})=>e.inputStyles.border.activeColor,({valid:e,theme:t})=>t.inputStyles.border[e?"activeColor":"errorColor"],({theme:e})=>e.focusColor,({theme:e})=>e.inputStyles.textStyles.placeholderColor,({theme:e})=>e.inputStyles.textStyles.fontFamily,({theme:e})=>e.inputStyles.textStyles.fontSize,({theme:e})=>e.inputStyles.textStyles.fontWeight,({theme:e})=>e.inputStyles.textStyles.letterSpacing,({theme:e})=>e.inputStyles.textStyles.height,({theme:e})=>e.inputStyles.textStyles.height),Ae=Object(l.c)(c.b).withConfig({displayName:"TextInput__StyledInputContainer",componentId:"sc-1ydur12-1"})(["&&{display:flex;flex-grow:1;flex-direction:column;align-self:flex-end;}"]);var Me=({formVersionCId:e,componentId:t})=>{var n;const i=Object(r.c)(p.e.isDesignWorkflow),a=Object(r.c)(n=>p.u.getOpenFormVersionComponentInstance(n,e,t)),l=Object(r.c)(e=>p.i.getComponentLabel(e,t)),s=Object(r.c)(e=>p.i.getComponentPlaceholder(e,t)),c=Object(r.c)(e=>p.i.getComponentType(e,t)),d=Object(r.c)(e=>p.i.getComponentStyling(e,t)),m=Object(r.c)(e=>p.i.getComponentFormat(e,t)),f=Object(r.c)(e=>p.i.getComponentDelimiter(e,t)),b=Object(r.c)(e=>p.i.getComponentPrefill(e,t)),g=Object(r.b)(),{current:h}=Object(o.useRef)(Object(u.a)("klaviyo_ariaid_")),[y,O]=Object(o.useState)(!1),[v,w]=Object(o.useState)(!1),[I,j]=Object(o.useState)(),C=({value:n,validate:o,hasChangedSinceLastValidation:r})=>{var i;const a=void 0!==n?n:"";j(a),O(!1),w(!!r),g(p.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:c===me.c?null===(i=me.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(m)))||void 0===i?void 0:i.convertValue(a,f):a,validate:o}))};Object(o.useEffect)(()=>{const e=Object(x.b)();if(b&&e&&c===me.g&&!i){const{$email:t}=e;C({value:t,validate:!1})}},[]);const S=v||!1==!i||!a||void 0===a.valid||a.valid,k=c!==me.c||s&&!y?s:null===(n=me.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(m)))||void 0===n?void 0:n.label.replace(/ /g,f);return o.default.createElement(Ae,null,o.default.createElement(Ve.a,null,l),o.default.createElement(Ne,{type:(e=>{switch(e){case me.g:return"email";case me.k:return"tel";default:return"text"}})(c),name:c===me.g?"email":null,tabIndex:i?-1:0,styling:d,componentType:c,placeholder:k,"aria-label":(()=>{let e;return e=c===me.c?"date":c===me.g?"email":"text",l||s||e})(),"aria-invalid":!S,"aria-describedby":S?void 0:h,onBlur:e=>C({value:e.target.value,validate:!0,hasChangedSinceLastValidation:!1}),onChange:e=>C({value:e.target.value,validate:!1,hasChangedSinceLastValidation:!0}),onFocus:()=>O(!0),valid:S?1:0,options:c===me.c?{date:!0,datePattern:m,delimiter:f}:{delimiter:""},value:I||""}),!i&&!v&&o.default.createElement(Pe.a,{formVersionCId:e,componentAriaID:h,componentInstance:a}))},We=n("../forms/src/Constants/defaultTheme/button.ts");const{THEME_KEY:ze}=We.a,Re=Object(l.c)(c.a).withConfig({displayName:"Button__FormStyledButton",componentId:"sc-1of1qh3-0"})(["&&{&&&{position:relative;"," background:",";border-radius:","px;border-style:",";border-color:",";border-width:","px;color:",";font-family:",";font-size:",";font-weight:",";letter-spacing:","px;line-height:1;white-space:normal;padding-top:11px;padding-bottom:11px;text-align:center;word-break:break-word;align-self:flex-end;cursor:pointer;&:focus{box-shadow:0 0 5px ",";}"," ","}}"],({theme:e})=>e[ze].fullWidth?"width: 100%;":"padding-left: 10px; padding-right: 10px;",({theme:e})=>e[ze].backgroundColor,({theme:e})=>e[ze].borderRadius,({theme:e})=>e[ze].borderStyle,({theme:e})=>e[ze].borderColor,({theme:e})=>e[ze].borderWidth,({theme:e})=>e[ze].textStyles.color,({theme:e})=>e[ze].textStyles.fontFamily,({theme:e})=>e[ze].textStyles.fontSize,({theme:e})=>e[ze].textStyles.fontWeight,({theme:e})=>e[ze].textStyles.letterSpacing,({theme:e})=>e.focusColor,({theme:e})=>!1!==e[ze].specifyHoverBackgroundColor&&`\n    &:hover {\n      background-color: ${e[ze].hoverBackgroundColor};\n      color: ${e[ze].hoverTextColor||e[ze].textColor};\n    }\n  }`,({$showSpinner:e})=>Ie({$showSpinner:e}));var He=({componentId:e,formVersionCId:t})=>{const n=Object(r.c)(t=>p.i.componentSelectById(t,e)),i=Object(r.c)(t=>p.i.getComponentActionId(t,e)),a=Object(r.c)(p.e.isDesignWorkflow);return o.default.createElement(we,{formVersionCId:t,actionId:i},({onClick:e,handlingFormAction:t})=>o.default.createElement(Re,{type:"button",onClick:e,$showSpinner:t,tabIndex:a?-1:0},n.data.content))};const Le=["selectorType","fillColor"];function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function qe(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Ue=({fillColor:e})=>o.default.createElement("g",{id:"checkboxInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.default.createElement("g",{id:"checkbox_on",transform:"translate(3.000000, 4.000000)",fill:"#303B43"},o.default.createElement("polygon",{id:"Shape",fill:e,points:"4.45454545 9.20149254 1.11363636 5.75373134 0 6.90298507 4.45454545 11.5 14 1.64925373 12.8863636 0.5"}))),Ge=({fillColor:e})=>o.default.createElement("g",{id:"radioInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.default.createElement("g",{id:"Group-17-Copy",transform:"translate(4.000000, 4.000000)",fill:"#303B43"},o.default.createElement("circle",{fill:e,id:"Oval-Copy",cx:"6",cy:"6",r:"5.55555556"})));var Je=Object(l.c)(e=>{let{selectorType:t,fillColor:n}=e,r=qe(e,Le);return o.default.createElement("svg",Be({width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},r),o.default.createElement("defs",null),"radio"===t?o.default.createElement(Ge,{fillColor:n}):o.default.createElement(Ue,{fillColor:n}))}).attrs(({theme:e})=>({fillColor:e.inputStyles.textStyles.formInputTextColor})).withConfig({displayName:"SelectorInner__StyledInner",componentId:"sc-mfg6zm-0"})(["&&{input[type='radio']:checked + label > &&&,input[type='checkbox']:checked + label > &&&{display:inline-block;}&&&{display:none;position:absolute;margin:0px;}}"]);const Ke=["selectorType","valid","backgroundColor"];function Qe(){return(Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Xe=({backgroundColor:e})=>o.default.createElement("g",null,o.default.createElement("g",null,o.default.createElement("rect",{strokeWidth:"1",x:"0.5",y:"0.5",width:"19",height:"19",rx:"2.22222222",fill:e}))),Ze=({backgroundColor:e})=>o.default.createElement("g",null,o.default.createElement("g",null,o.default.createElement("circle",{strokeWidth:"1",cx:"10",cy:"10",r:"9.5",fill:e})));var et=Object(l.c)(e=>{let{selectorType:t,valid:n,backgroundColor:r}=e,i=Ye(e,Ke);return o.default.createElement("svg",Qe({width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},i),"radio"===t?o.default.createElement(Ze,{backgroundColor:r}):o.default.createElement(Xe,{backgroundColor:r}))}).attrs(({theme:e})=>({backgroundColor:e.inputStyles.inputBackgroundColor})).withConfig({displayName:"SelectorOuter__StyledOuter",componentId:"sc-ztv0y5-0"})(["&&{stroke:",";input:focus + label > &{filter:",";stroke:",";}margin-right:8px;min-width:20px;width:auto;height:auto;}"],({theme:e,valid:t})=>t?e.inputStyles.border.defaultColor:e.inputStyles.border.errorColor,({theme:e})=>`drop-shadow( 0px 0px 2px ${e.focusColor})`,({theme:e})=>e.inputStyles.border.activeColor);const tt=Object(l.c)(c.b).withConfig({displayName:"MultiInputField__Text",componentId:"sc-1x1dwze-0"})(["&&{color:",";font-family:",";font-size:",";font-weight:",";letter-spacing:","px;margin-right:24px;display:flex;position:relative;top:1px;}"],({theme:e})=>e.inputStyles.textStyles.color,({theme:e})=>e.inputStyles.textStyles.fontFamily,({theme:e})=>e.inputStyles.textStyles.fontSize,({theme:e})=>e.inputStyles.textStyles.fontWeight,({theme:e})=>e.inputStyles.textStyles.letterSpacing),nt=Object(l.c)(c.g).withConfig({displayName:"MultiInputField__OptionContainer",componentId:"sc-1x1dwze-1"})(["&&{display:flex;align-items:center;flex:",";padding-bottom:8px;cursor:pointer;word-break:break-word;max-width:100%;cursor:pointer;> *{cursor:pointer;}}"],({theme:e})=>e.inputStyles.arrangement===me.a?" 1 0 100%":" 0 0 auto");var ot=({name:e,label:t,isValid:n,componentAriaID:r,componentType:i,onChange:a,tabIndex:l})=>{const{current:s}=Object(o.useRef)(Object(u.a)(e+"__")),d=i===me.m?"radio":"checkbox";return o.default.createElement(o.default.Fragment,null,o.default.createElement(c.f,{style:{position:"absolute",width:0,opacity:0},tabIndex:l,type:d,id:s,name:e,onChange:a,"aria-invalid":!n,"aria-label":t,"aria-describedby":r}),o.default.createElement(nt,{htmlFor:s},o.default.createElement(et,{valid:n,selectorType:d,"aria-hidden":"true"}),o.default.createElement(Je,{selectorType:d,"aria-hidden":"true"}),o.default.createElement(tt,null,t)))};const rt=["selected","id","label"];function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const st=Object(l.c)(Ve.a).withConfig({displayName:"MultiInput__StyledLabel",componentId:"sc-3eieng-0"})(["&&{margin-right:8px;margin-bottom:8px;}"]),ct=Object(l.c)(c.b).withConfig({displayName:"MultiInput__Container",componentId:"sc-3eieng-1"})(["&&{align-self:flex-end;",";}"],({theme:e})=>e.inputStyles.arrangement===me.a?"\n  display: block;\n":"\n  flex-direction: column;\n  flex-wrap: wrap;\n"),dt=Object(l.c)(c.b).withConfig({displayName:"MultiInput__AllOptionsContainer",componentId:"sc-3eieng-2"})(["&&{"," input:focus + label > svg circle,input:focus + label > svg rect{stroke:",";}}"],({theme:e})=>e.inputStyles.arrangement===me.a?"\n        display: block;\n      ":"\n      display: inline-flex;\n      justify-content: flex-start;\n      flex-wrap: wrap;\n      ",({theme:e})=>e.inputStyles.activeBorderColor),mt=({options:e,componentType:t,toggledOptionIndex:n})=>e.reduce((e,o,r)=>{let{selected:i,id:a,label:l}=o,s=lt(o,rt),c=t!==me.m&&i;return n===r&&(c=!c),e.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({selected:c,label:l,id:a||Object(u.a)(l+"__")},s)),e},[]);var ut=({formVersionCId:e,componentId:t})=>{const n=Object(r.c)(p.e.isDesignWorkflow),i=Object(r.c)(n=>p.u.getOpenFormVersionComponentInstance(n,e,t)),a=Object(r.c)(e=>p.i.getComponentType(e,t)),l=Object(r.c)(e=>p.i.getComponentDropdownOptions(e,t)),s=Object(r.c)(e=>p.i.getComponentFieldId(e,t)),c=Object(r.c)(e=>p.i.getComponentLabel(e,t)),d=Object(r.b)(),[m,f]=Object(o.useState)([]);Object(o.useEffect)(()=>{f(mt({options:l,componentType:a}))},[l]);const{inputName:b,labelId:g}=Object(o.useMemo)(()=>{const e=Object(u.a)(s+"__");return{inputName:e,labelId:`kl_${e}_label`}},[]),h=n||!i||void 0===i.valid||i.valid;return o.default.createElement(ct,null,o.default.createElement(st,{id:g},c),o.default.createElement(dt,{role:a===me.m?"radiogroup":"group","aria-labelledby":g},m.map(({label:r,id:i},l)=>o.default.createElement(ot,{key:i,name:b,label:r,isValid:h,componentType:a,componentAriaID:g,onChange:()=>(n=>{const o=mt({options:m,componentType:a,toggledOptionIndex:n});f(o);const r=(e=>e.filter(({selected:e})=>e).map(e=>e.value||e.label))(o);d(p.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:a===me.m?r.toString():r}))})(l),tabIndex:n?-1:0}))),!n&&o.default.createElement(Pe.a,{formVersionCId:e,componentAriaID:g,componentInstance:i}))};const pt=ge,ft={[me.h]:_e,[me.p]:pt,[me.q]:Me,[me.g]:Me,[me.k]:fe(()=>Promise.all([n.e(1),n.e(11),n.e(3)]).then(n.bind(null,"../forms/src/Client/Components/FormComponents/PhoneNumberInput/index.ts"))),[me.b]:He,[me.j]:ut,[me.m]:ut,[me.c]:Me,[me.f]:fe(()=>Promise.all([n.e(1),n.e(2)]).then(n.bind(null,"../forms/src/Client/Components/FormComponents/Dropdown/index.ts")))};function bt(){return(bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const yt=({children:e})=>e,Ot={outer:{right:"0 0 0 auto",left:"0 auto 0 0",center:"0 auto"},inner:{right:"flex-end",left:"flex-start",center:"center"}},vt=Object(l.c)(c.b).withConfig({displayName:"FormComponent__StyledFormComponentWrapper",componentId:"sc-1gg8fea-0"})(["&&{display:flex;justify-content:",";",";position:relative;",";"," flex:",";",";}"],({$innerAlignment:e})=>Ot.inner[e]||"flex-start",({theme:{[de.a.THEME_KEY]:{padding:{top:e,right:t,bottom:n,left:o}}}})=>`\n  padding: ${e||0}px ${t||0}px ${n||0}px ${o||0}px;\n  `,({theme:{[de.a.THEME_KEY]:{blockBackgroundColor:e}}})=>e?`background-color: ${e};`:"",({$isHovering:e})=>e&&"cursor: pointer;",e=>!1!==e.$fullWidth?"1 0 0":"0 1 auto",({alignment:e,$fullWidth:t})=>!1===t&&"margin: "+(e&&Ot.outer[e]||""));var wt=({componentId:e,componentPosition:t,formVersionCId:n,rowDroppableHover:i,setDragState:a,dragFinished:s})=>{const[c,d]=Object(o.useState)(!1),u=Object(o.useRef)(null),f=Object(r.b)(),b=Object(r.c)(t=>p.i.componentSelectById(t,e),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),g=Object(r.c)(p.e.isDesignWorkflow),h=Object(r.c)(p.n.getActiveComponentId),{currentViewId:y}=Object(r.c)(e=>p.u.openFormVersionSelectById(e,n)),O=Object(r.c)(t=>p.i.getComponentTheme(t,e,y),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),v=ft[b.componentType],w=h===b.componentId,I=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({component:b,$fullWidth:b.data.styling.fullWidth,alignment:b.data.styling.alignment,$innerAlignment:b.data.styling.innerAlignment},g?{$active:w,$isHovering:c,onClick:()=>{f(p.n.slice.actions.setActiveSidebar({type:m.b,key:e}))},onMouseOver:()=>{s?a(!1):d(!0)},onMouseLeave:()=>d(!1),onDragStart:()=>d(!1),onDragEnd:()=>{a(!0)},ref:u}:{});return o.default.createElement(l.a,{theme:e=>Object(ce.a)({},e,O,{[de.a.THEME_KEY]:b.data.styling})},o.default.createElement(vt,bt({},I,{"data-testid":"form-component",className:"notranslate"}),g?o.default.createElement(yt,{active:w,componentId:e,componentPosition:t,componentRef:u.current,formVersionCId:n,isHovering:c,rowDroppableHover:i,setIsHovering:d},o.default.createElement(v,{componentId:e,formVersionCId:n})):o.default.createElement(v,{componentId:e,formVersionCId:n})))};const It=Object(l.c)(c.b).withConfig({displayName:"Row__FormRow",componentId:"sc-1avh9u7-1"})(["&&{display:flex;flex-direction:row;align-items:stretch;position:relative;",";}"],e=>e.$hoverDirection?`\n    border-${e.$hoverDirection}: 2px;\n    border-${e.$hoverDirection}-style: solid;\n    border-${e.$hoverDirection}-color: ${e.theme.klPrimary};\n    margin-${e.$hoverDirection}: -2px;\n  `:"");var xt=({rowId:e,formVersionCId:t})=>{const n=Object(r.c)(t=>p.w.getRowComponentIds(t,e)),[i,a]=Object(o.useState)(!1),[l,s]=Object(o.useState)(!1),[c,d]=Object(o.useState)(!1),m=(i?"top":l&&"bottom")||!1;return n.length?o.default.createElement(It,{$hoverDirection:m,"data-testid":"form-row"},n.map((e,n)=>o.default.createElement(wt,{key:e,componentId:e,componentPosition:n,formVersionCId:t,rowDroppableHover:(e,t)=>{"top"===e?a(t):s(t)},setDragState:e=>d(e),dragFinished:c})),null):null},jt=n("../forms/src/Utils/isMobile.ts");function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Et=()=>null,$t=Object(l.c)(c.b).withConfig({displayName:"Column__HoverTab",componentId:"sc-1rrm03f-0"})(["&&{position:absolute;width:76px;margin-top:-24px;height:22px;margin-bottom:-22px;margin-left:-2px;background-color:",";border-radius:4px 4px 0 0;color:",";font-size:12px;line-height:22px;text-align:center;}"],({theme:e,$isSelected:t})=>t?e.klPrimary:e.klGrayDark,({theme:e})=>e.klWhite),_t=Object(l.c)(c.b).withConfig({displayName:"Column__HoverFrame",componentId:"sc-1rrm03f-1"})(["&&{position:absolute;width:",";"," ",";border-radius:0px 4px 4px 4px;}"],({width:e})=>e+"px",({$viewBorderWidth:e})=>`height: calc(100% - ${2*e}px);`,({theme:e,$isSelected:t})=>"box-shadow: 0 0 0 2px "+(t?e.klPrimary:e.klGrayDark)),Tt=Object(l.c)(c.b).withConfig({displayName:"Column__FormColumn",componentId:"sc-1rrm03f-2"})(["&&{display:flex;flex-direction:column;"," "," ",";width:",";"," margin-top:","px;margin-bottom:","px;margin-left:","px;margin-right:","px;"," background-color:",";"," "," ","}"],({isHovering:e})=>e&&"cursor: pointer;",({isHovering:e})=>e&&"> * {cursor: pointer;}",({$minWidth:e})=>e?`min-width: ${e}px`:"",({$minWidth:e})=>e?(null==e?void 0:e.toString())+"px":"100%",({$columnMargin:e})=>`\n  margin-top: ${e.top}px;\n  margin-bottom: ${e.bottom}px;\n  margin-left: ${e.left}px;\n  margin-right: ${e.right}px;\n  `,({$columnMargin:e})=>e.top,({$columnMargin:e})=>e.bottom,({$columnMargin:e})=>e.left,({$columnMargin:e})=>e.right,({$columnPadding:e})=>`\n  padding-top: ${e.top}px;\n  padding-bottom: ${e.bottom}px;\n  padding-left: ${e.left}px;\n  padding-right: ${e.right}px;\n  `,e=>e.$backgroundColor,e=>e.$backgroundImage?`\n      background-image: ${e.$backgroundImage&&`url(${e.$backgroundImage.url})`};\n      background-repeat: no-repeat;\n      background-size: ${e.$backgroundImage&&("custom"===e.$backgroundImage.position?e.$backgroundImage.customWidth+"px;":e.$backgroundImage.position)};\n      background-position-x: ${e.$backgroundImage&&e.$backgroundImage.alignment};\n      background-position-y: ${e.$backgroundImage&&e.$backgroundImage.verticalAlignment||"center"}; `:"",({$minimumHeight:e})=>void 0!==e?`min-height: ${e}px;`:"",({$isSideImageColumn:e})=>e?"":"justify-content: center;");var Vt=({columnId:e,formVersionCId:t,formVersionId:n,viewId:i,sideImageExistsAndHidden:a})=>{var l,s,c,d,u,f;const b=Object(r.b)(),g=Object(o.useRef)(null),[h,y]=Object(o.useState)(!1),O=Object(r.c)(p.e.isDesignWorkflow),v=Object(r.c)(e=>p.q.getFormVersionSideImage(e,n)),w=Object(r.c)(t=>p.g.getColumnRowIds(t,e)),I=Object(r.c)(t=>p.g.columnSelectById(t,e)),x=Object(r.c)(e=>p.A.getViewTheme(e,i)),j=Object(r.c)(e=>p.n.getActiveColumnId(e)),{padding:C,minimumHeight:S}=x,k=v&&v.position===I.position,{columnMargin:E,columnPadding:$}=((e,t,n,o)=>{const r={top:0,left:0,right:0,bottom:0},i={top:0,left:0,right:0,bottom:0};return o||void 0!==n&&(e?(r.top=t&&t.top?-1*t.top:0,r.bottom=t&&t.bottom?-1*t.bottom:0,0===n?r.left=t&&t.left?-1*t.left:0:1===n&&(r.right=t&&t.right?-1*t.right:0)):0===n?i.left=(null==t?void 0:t.left)||0:1===n&&(i.right=(null==t?void 0:t.right)||0)),{columnMargin:r,columnPadding:i}})(k,C,null==v?void 0:v.position,a),_=null==I||null===(l=I.data)||void 0===l||null===(s=l.styling)||void 0===s?void 0:s.sizeMultiplier,T=null==x?void 0:x.size,V=_&&T?((e,t,n)=>{const o=e/(e+1)*t;return n?o:t-o})(_,T,k):0,P=null==I||null===(c=I.data)||void 0===c||null===(d=c.styling)||void 0===d?void 0:d.backgroundImage,D=null==I||null===(u=I.data)||void 0===u||null===(f=u.styling)||void 0===f?void 0:f.backgroundColor,F=j===I.columnId,N=(null==x?void 0:x.borderStyle)&&"none"!==(null==x?void 0:x.borderStyle)&&(null==x?void 0:x.borderWidth)||0,A=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},O&&k?{$minWidth:V,$isHovering:h,onClick:()=>{b(p.n.slice.actions.setActiveSidebar({type:m.a,key:e}))},onMouseOver:()=>{y(!0)},onMouseLeave:()=>y(!1),ref:g}:{}),M=Object(r.c)(e=>p.n.getMobileDesktopType(e))===m.e;return((e,t,n,o)=>{var r,i,a,l,s;const c=(null===(r=e.rows)||void 0===r?void 0:r.length)>0,d=(null==e||null===(i=e.data)||void 0===i||null===(a=i.styling)||void 0===a?void 0:a.backgroundImage)||(null==e||null===(l=e.data)||void 0===l||null===(s=l.styling)||void 0===s?void 0:s.backgroundColor);return!!c||(n?!o||t:!!d&&(!Object(jt.a)()||t))})(I,(null==v?void 0:v.displayOnMobile)||!1,O,M)?o.default.createElement(o.default.Fragment,null,o.default.createElement(Tt,Ct({$minWidth:V,$backgroundImage:P,$backgroundColor:D,$columnMargin:E,$columnPadding:$,$minimumHeight:S,$isSideImageColumn:k},null!=P&&P.altText?{title:null==P?void 0:P.altText}:{},A),O&&(h||F)&&k?o.default.createElement(o.default.Fragment,null,o.default.createElement($t,{$columnWidth:T-V,$columnPosition:I.position,$isSelected:F},"Side Image"),o.default.createElement(_t,{width:V,$isSelected:F,$viewBorderWidth:N})):null,O&&!P&&!D&&k?o.default.createElement(Et,{isSideImage:!0}):null==w?void 0:w.map(e=>o.default.createElement(xt,{key:e,rowId:e,formVersionCId:t})))):null};var Pt=(e,t)=>e/(e+1)*t;function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const Ft={left:"float: left",center:"margin: 0 auto",right:"float: right"},Nt=Object(l.c)(c.c).withConfig({displayName:"View__FormView",componentId:"sc-1i2s79a-0"})(["&&{display:flex;flex-direction:row;box-sizing:border-box;overflow:hidden;"," "," border-style:",";border-width:","px;border-color:",";background-color:",";background-image:",";background-repeat:no-repeat;background-size:",";background-position-x:",";background-position-y:",";",";}"],({theme:{size:e,isMaxWidth:t,embedAlignment:n},$isEmbed:o,$sizeOverride:r})=>o?`width: 100%;\n        ${t?`max-width: ${e}px;`:""}\n        ${n?Ft[n]+";":""}\n        `:`\n        width: ${r||e}px;\n        min-width: 200px;\n        max-width: 1000px;\n        `,({theme:e,$isDocked:t,$formTypeDirection:n})=>{return"border-radius: "+(o=e.borderRadius,r=n,t?null!=r&&r.includes("BOTTOM")?`${o}px ${o}px 0 0;`:`0 0 ${o}px ${o}px;`:o+"px;");var o,r},({theme:e})=>e.borderStyle,({theme:e})=>e.borderWidth||0,({theme:e})=>e.borderColor,({theme:e})=>e.backgroundColor,({theme:e})=>e.backgroundImage&&`url(${e.backgroundImage.url})`,({theme:e})=>e.backgroundImage&&("custom"===e.backgroundImage.position?e.backgroundImage.customWidth+"px;":e.backgroundImage.position),({theme:e})=>e.backgroundImage&&e.backgroundImage.alignment,({theme:e})=>{var t;return(null===(t=e.backgroundImage)||void 0===t?void 0:t.verticalAlignment)||"center"},({theme:{padding:{top:e,right:t,bottom:n,left:o}}})=>`\n  padding-top: ${e}px;\n  padding-right: ${t}px;\n  padding-bottom: ${n}px;\n  padding-left: ${o}px;\n  `),At=Object(l.c)(e=>o.default.createElement(c.f,Dt({type:"submit",tabIndex:"-1",value:"Submit"},e))).withConfig({displayName:"View__HiddenSubmit",componentId:"sc-1i2s79a-1"})(["&&{&&&{display:none;}}"]);var Mt=({viewId:e,isEmbed:t,formVersionId:n,formVersionCId:i,isDocked:a,formTypeDirection:s})=>{var c,u;const f=Object(r.c)(e=>p.q.formVersionSelectById(e,n)),b=Object(r.c)(t=>p.A.getViewColumnIds(t,e)),g=Object(r.c)(e=>p.g.columnSelectAll(e)).filter(e=>b.includes(e.columnId)).sort((e,t)=>e.position-t.position),h=Object(r.c)(t=>p.i.getSubmitFormActionsFromView(t,e)),y=Object(r.c)(t=>p.A.getViewTheme(t,e)),O=Object(r.c)(e=>p.q.getFormVersionSideImage(e,n)),v=null==O||null===(c=O.data)||void 0===c||null===(u=c.styling)||void 0===u?void 0:u.sizeMultiplier,w=v?Pt(v,y.size):0,I=Object(r.c)(t=>p.g.getViewColumns(t,e)).find(e=>e.position===(null==O?void 0:O.position)),x=Object(r.c)(p.e.isDesignWorkflow),j=Object(r.c)(e=>p.n.getMobileDesktopType(e))===m.e,C=((e,t,n,o,r)=>{var i,a,l,s;const c=!n&&(Object(jt.a)()&&!t||t&&r),d=!t&&e&&!(null!=o&&null!==(i=o.data)&&void 0!==i&&null!==(a=i.styling)&&void 0!==a&&a.backgroundImage||null!=o&&null!==(l=o.data)&&void 0!==l&&null!==(s=l.styling)&&void 0!==s&&s.backgroundColor);return c||d})(!!O,x,null==O?void 0:O.displayOnMobile,I,j),S=C?y.size-w:void 0,k=Object(o.useRef)(null);return Object(o.useEffect)(()=>{const e=k.current;f.formType===d.f&&e&&e.focus()},[k]),o.default.createElement(l.a,{theme:y},o.default.createElement(Nt,{className:"klaviyo-form-version-cid_"+i,"data-testid":"klaviyo-form-"+f.formId,noValidate:!0,$isEmbed:t,ref:k,tabIndex:-1,$sizeOverride:S,onSubmit:async e=>{if(e.preventDefault(),1!==h.length)return!1;const{actionId:t}=h[0],n=se({actionId:t,formVersionCId:i});return await new n({actionId:t,formVersionCId:i}).runAction(),!0},$isDocked:a,$formTypeDirection:s},g.map(t=>o.default.createElement(Vt,{key:t.columnId,columnId:t.columnId,formVersionCId:i,formVersionId:n,viewId:e,sideImageExistsAndHidden:C})),o.default.createElement(At,null)))};const Wt=Object(l.c)(c.b).withConfig({displayName:"ErrorView__ErrorViewWrapper",componentId:"sc-69p2vo-0"})(["&&{width:",";height:165px;display:flex;justify-content:center;align-items:center;background:#ffffff;}"],({isEmbed:e})=>e?"100%":"450px"),zt=Object(l.c)(c.b).withConfig({displayName:"ErrorView__ErrorText",componentId:"sc-69p2vo-1"})(["&&{text-align:center;width:300px;}"]);var Rt=({isEmbed:e=!1})=>o.default.createElement(Wt,{isEmbed:e},o.default.createElement(zt,null,"An error occured when submitting. Please try again later.")),Ht=n("../forms/src/Constants/defaultTheme/clientThemeConstants.ts");function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const Bt=Object(l.c)(c.k).attrs(()=>({tabIndex:0,alt:"Close form"})).withConfig({displayName:"CloseButton__StyledSvgInput",componentId:"sc-1mksxwr-0"})(["&&{right:0;top:0;position:absolute;z-index:6;cursor:pointer;height:","px;width:","px;margin-right:","px;margin-top:","px;> *{cursor:pointer;}","}"],({size:e})=>e,({size:e})=>e,({$margin:e})=>e.right,({$margin:e})=>e.top,({$isDesignWorkflow:e})=>e?"":"\n  :focus {\n    outline-width: 1px;\n    outline-style: solid;\n    outline-color: #4d90fe;\n  }\n\n  @media (-webkit-min-device-pixel-ratio: 0) {\n    :focus {\n      outline-color: -webkit-focus-ring-color;\n      outline-style: auto;\n    }\n  }\n  "),qt=l.c.div.withConfig({displayName:"CloseButton__HoverFrame",componentId:"sc-1mksxwr-1"})(["&&{box-shadow:0 0 0 2px ",";box-sizing:border-box;border-radius:4px;height:",";width:",";margin-top:",";margin-right:",";position:absolute;top:0;right:0;}"],({theme:e,isSelected:t})=>t?e.klPrimary:e.klGrayDark,({size:e})=>e+"px",({size:e})=>e+"px",({$margin:e})=>e.top+"px",({$margin:e})=>e.right+"px");var Ut=({formVersionId:e,onClick:t})=>{var n;const i=Object(r.b)(),[a,l]=Object(o.useState)(!1),s=!!Object(r.c)(p.n.getXButtonActive),c=Object(r.c)(p.e.isDesignWorkflow),d=Ht.a.dismiss,u=null===(n=Object(r.c)(t=>p.q.getFormVersionDataStyling(t,e)))||void 0===n?void 0:n.dismissButtonStyles,f=Object(ce.a)({},d,u),b=f.size,g=a||s;return o.default.createElement(o.default.Fragment,null,g&&o.default.createElement(qt,{size:b,isSelected:s,$margin:f.margin}),o.default.createElement(Bt,Lt({width:b,height:b,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t,"aria-describedby":"close-form",$isDesignWorkflow:c,size:b,$margin:f.margin},c&&{onClick:()=>{i(p.n.slice.actions.setActiveSidebar({type:m.d}))},onMouseOver:()=>{l(!0)},onMouseLeave:()=>l(!1)}),o.default.createElement("title",{id:"close-form"},"Close form"),o.default.createElement("circle",{cx:"10",cy:"10",r:"9.5",fill:f.backgroundColor,stroke:f.borderColor}),o.default.createElement("path",{d:"M6 6L14 14M6 14L14 6L6 14Z",stroke:f.xColor,strokeWidth:f.xStroke,strokeLinecap:"round",strokeLinejoin:"round"})))},Gt=n("../../node_modules/react-animations/lib/slideInLeft.js"),Jt=n.n(Gt),Kt=n("../../node_modules/react-animations/lib/slideInRight.js"),Qt=n.n(Kt),Yt=n("../../node_modules/react-animations/lib/slideInUp.js"),Xt=n.n(Yt),Zt=n("../../node_modules/react-animations/lib/slideInDown.js"),en=n.n(Zt),tn=n("../../node_modules/react-animations/lib/fadeIn.js"),nn=n.n(tn);const on={LEFT:Jt.a,TOP_CENTER:en.a,BOTTOM_CENTER:Xt.a,RIGHT:Qt.a},rn=({formTypeDirection:e,modalScale:t})=>{const n={TOP:"top: 0;",CENTER:`\n    top: 50%; \n    transform: scale(${t}) translateY(-50%);\n    margin-top: auto; \n    margin-bottom: auto;\n    `,BOTTOM:"bottom: 0;"},o={LEFT:"left: 0;",CENTER:`\n    left: 50%; \n    transform: scale(${t}) translateX(-50%);\n    margin-left: auto; \n    margin-right: auto;\n    `,RIGHT:"right: 0;"};return`\n${n[Object.keys(n).find(t=>e&&e.startsWith(t))]}\n${o[Object.keys(o).find(t=>e&&e.endsWith(t))]}\n  `},an=Object(l.c)(c.b).withConfig({displayName:"animation__AnimatedModal",componentId:"sc-17sps2-0"})(["&&{",";}"],({$formType:e,$formTypeDirection:t})=>(({formType:e,formTypeDirection:t})=>{const n=e===d.f?Object(l.d)(["",""],nn.a):Object(l.d)(["",""],on[Object.keys(on).find(e=>t&&t.endsWith(e))]);return Object(l.b)(["&&{animation:"," ",";}"],e===d.f?"0.5s":"1.5s",n)})({formType:e,formTypeDirection:t}));var ln=()=>window.matchMedia("(orientation: landscape)").matches;var sn=(e,t)=>{var n,o;let r=e.formType===d.e&&[d.c,d.b].includes(null===(n=e.data)||void 0===n||null===(o=n.flyoutOptions)||void 0===o?void 0:o.docking);Object(jt.a)()&&ln()&&(r=!1);let i=e.formTypeDirection||null;var a,l;r&&t&&(i=(null===(a=e.data)||void 0===a||null===(l=a.flyoutOptions)||void 0===l?void 0:l.docking)===d.c?d.g:d.a);return{isDocked:r&&t,evaluatedFormTypeDirection:i}};const cn=Object(l.c)(c.b).withConfig({displayName:"ModalContent__MarginBox",componentId:"sc-1omu75e-0"})(["&&{position:relative;flex-direction:column;display:flex;"," "," ","}"],({$formMargin:e})=>null!=e&&e.top?`\n    ::before {\n      content: '';\n      display: block;\n      height: ${e.top}px;\n      width: 100%;\n    }\n  `:"",({$formMargin:e})=>null!=e&&e.bottom?`\n    ::after {\n      content: '';\n      display: block;\n      height: ${e.bottom}px;\n      width: 100%;\n    }\n  `:"",({$formMargin:e})=>e?`\n    margin-left: ${e.left||0}px;\n    margin-right: ${e.right||0}px;\n  `:""),dn=Object(l.c)(c.b).withConfig({displayName:"ModalContent__ViewContainer",componentId:"sc-1omu75e-1"})(["&&{position:relative;display:flex;}"]),mn=Object(l.c)(c.b).withConfig({displayName:"ModalContent__StyledModalContent",componentId:"sc-1omu75e-2"})(["&&{border-radius:5px;border-radius:","px;position:relative;"," outline:0;display:flex;justify-content:center;flex:0 0 auto;}"],({$borderRadius:e})=>e||s.a.theme.borderRadius,({$formType:e})=>e===d.f?"align-self: center;":""),un=Object(l.c)(c.b).withConfig({displayName:"ModalContent__DropShadowContainer",componentId:"sc-1omu75e-3"})(["&&{"," ","}"],({$dropShadow:e})=>e&&e.enabled?`\n    box-shadow: 0px 0px ${e.blur}px ${e.color};\n  `:"",({$borderRadius:e})=>e?`\n      border-radius: ${e}px; \n  `:"");var pn=({closePortal:e,formVersionCId:t})=>{var n,i;const a=Object(r.c)(e=>p.u.openFormVersionSelectById(e,t)),l=Object(r.c)(e=>p.q.formVersionSelectById(e,a.formVersionId)),s=Object(r.c)(e=>p.q.getFormVersionDismissalConfig(e,l.formVersionId)),c=Object(r.c)(p.n.getMobileDesktopType),f=Object(r.c)(p.e.isDesignWorkflow),b=Object(r.c)(p.u.getTopModalCId),g=Object(r.c)(e=>p.A.getViewDataStylingBorderRadius(e,a.currentViewId)),h=Object(r.c)(e=>p.A.getViewDataStylingDropShadow(e,a.currentViewId)),[y,O]=Object(o.useState)(),v=Object(o.useRef)(null);Object(o.useEffect)(()=>{O(Object(u.a)("modal_animation_key"))},[l.formType,l.formTypeDirection,c]),Object(o.useEffect)(()=>{const n=n=>{var o,r,i;null!==(o=v.current)&&void 0!==o&&o.contains(n.target)||f||t!==b||null===e||(r=l.formType,void 0!==(i=s)&&r===d.f&&(Object(jt.a)()?!0===(null==i?void 0:i.mobile):!0===(null==i?void 0:i.desktop)))||e()};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[f,t,b,e,s]);const{isDocked:w,evaluatedFormTypeDirection:I}=sn(l,f?c===m.e:Object(jt.a)());return y?o.default.createElement(mn,{ref:v,$borderRadius:g,$formType:l.formType,$mobileDesktopType:c,$isDesignWorkflow:f,$margin:null===(n=l.data)||void 0===n||null===(i=n.styling)||void 0===i?void 0:i.margin,"data-testid":c,$formTypeDirection:I,$isDocked:w},o.default.createElement(o.Suspense,{fallback:o.default.createElement("div",null)},o.default.createElement(an,{key:y,$formType:l.formType,$formTypeDirection:I,"data-testid":l.formType},(x=o.default.createElement(un,{$dropShadow:h,$borderRadius:g},o.default.createElement(dn,null,o.default.createElement(Ut,{formVersionId:a.formVersionId,onClick:e}),a.showErrorView?o.default.createElement(Rt,null):o.default.createElement(Mt,{formVersionCId:t,formVersionId:a.formVersionId,viewId:a.currentViewId,isDocked:w,formTypeDirection:I}))),w?x:o.default.createElement(cn,{$formMargin:null===(j=l.data)||void 0===j||null===(C=j.styling)||void 0===C?void 0:C.margin},x))))):null;var x,j,C};const{MobilePhoneFrame:fn,MOBILE_FRAME_WEB_VARIANT:bn}={MobilePhoneFrame:()=>null,MOBILE_FRAME_WEB_VARIANT:()=>null},gn=Object(l.b)(["&&{","}"],({formType:e,overlayColor:t,formTypeDirection:n,isDesignWorkflow:o,modalScale:r,isQuickstart:i,mobileOverlay:a,isDocked:l})=>`\n  position: relative;\n  justify-content: center;\n  align-items: ${((e,t)=>e===d.e&&t?t.startsWith("BOTTOM")?"flex-end":t.startsWith("CENTER")?"center":"flex-start":"center")(e,n)};\n  background-color: ${e===d.e?(null==a?void 0:a.enabled)&&(null==a?void 0:a.color)||"transparent":t};\n  align-self: center;\n  height: 100%;\n  \n  \n  width: ${i?"320px;":"100%;"}\n  \n  & > div {\n    position: absolute;\n    transform: scale(${r});\n    transform-origin: ${e===d.e&&n?""+(n.startsWith("BOTTOM")?"bottom":"top"):"center"};\n    max-height: ${o?"100%":100/r+"%"};\n    ${e!==d.e||l||1!==r?"":`\n    position: absolute;\n    ${rn({formTypeDirection:n,modalScale:r})}\n    `} \n`),hn=Object(l.b)(["&&{","}"],({formTypeDirection:e,isDesignWorkflow:t,modalScale:n})=>`\n      max-height: ${t?"100%":100/n+"%"};\n      position: ${t?"absolute":"fixed"};\n      transform: scale(${n});\n      transform-origin: \n      ${e&&e.endsWith("RIGHT")?"right":"left"} \n      ${e&&e.startsWith("BOTTOM")?"bottom":"top"}\n      ;\n      ${rn({formTypeDirection:e,modalScale:n})}\n      overflow: ${t?"initial":"visible"};\n  `),yn=Object(l.c)(c.b).withConfig({displayName:"Modal__StyledOverlay",componentId:"sc-9h204v-0"})(["&&{","}"],({$mobileOverlay:e})=>e&&e.enabled?`\n    background-color: ${e.color};\n    height: 100%;\n    width: 100%;\n    left: 0;\n    top: 0;\n    position: fixed;\n    z-index: 90000;\n  `:""),On=Object(l.b)(["&&{","}"],({overlayColor:e,isDesignWorkflow:t,modalScale:n,formType:o})=>`\n  position: ${t?"initial":"fixed"};\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      justify-content: center;\n      align-items: ${t?"flex-start":"center"};\n      overflow: auto;\n      background-color: ${o===d.e?"transparent":e};\n      & > div {\n        overflow: ${t?"initial":"visible"};\n        transform: scale(${n});\n        transform-origin: center;\n        max-height: ${t?"100%":100/n+"%"};\n      }\n  `),vn=Object(l.c)(({children:e,className:t})=>o.default.createElement(c.b,{className:t},e)).withConfig({displayName:"Modal__ModalPortalStyled",componentId:"sc-9h204v-1"})(["&&{display:flex;-webkit-overflow-scrolling:touch;::-webkit-scrollbar{width:0px;height:0px;background:transparent;}z-index:",";",";}"],({isDesignWorkflow:e})=>e?"0":9e4,({formType:e,isDesignWorkflow:t,mobileDesktopType:n})=>n===m.e&&t?gn:e===d.e?hn:On),wn=Object(l.c)(fn).withConfig({displayName:"Modal__StyledMobilePhoneFrame",componentId:"sc-9h204v-2"})(["&&{align-self:center;z-index:1;}"]);var In=({formVersionCId:e,closePortal:t})=>{var n,i,a,l;const u=Object(r.c)(t=>p.u.openFormVersionSelectById(t,e)),f=Object(r.c)(e=>p.q.formVersionSelectById(e,u.formVersionId));let b=Object(r.c)(e=>p.A.getViewDataStylingSize(e,u.currentViewId))||s.a.theme.size;const g=Object(r.c)(e=>p.q.getFormVersionSideImage(e,u.formVersionId)),h=null==g||null===(n=g.data)||void 0===n||null===(i=n.styling)||void 0===i?void 0:i.sizeMultiplier,y=h?Pt(h,b):0,O=Object(r.c)(p.e.isDesignWorkflow),v=Object(r.c)(p.n.getMobileDesktopType),w=v===m.e&&O,I=Object(r.c)(p.n.getDesignerType)===m.g,x=Object(r.c)(p.n.getCompanyUrl),{isDocked:j,evaluatedFormTypeDirection:C}=sn(f,O?v===m.e:Object(jt.a)());(Object(jt.a)()||w)&&g&&!g.displayOnMobile&&(b-=y);const S=null===(a=f.data)||void 0===a||null===(l=a.styling)||void 0===l?void 0:l.margin,k=j?0:(null==S?void 0:S.left)||0,E=j?0:(null==S?void 0:S.right)||0,$=Math.max(Math.min(parseInt(b.toString(),10),1e3),200)+E+k,_=Object(r.c)(e=>p.A.getViewDataStylingOverlayColor(e,u.currentViewId))||s.a.theme.overlayColor,T=Object(r.c)(e=>{var t;return null===(t=p.A.getViewDataStyling(e,u.currentViewId))||void 0===t?void 0:t.mobileOverlay})||s.a.theme.mobileOverlay,V=Object(r.c)(p.e.isFetchingForms),[P,D]=Object(o.useState)(1);Object(o.useEffect)(()=>{const e=()=>{const e=I?m.h:m.f,t=w?e:window.innerWidth,n=j?t/$:Math.min(t/$,1);D(n)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[$,v]);const F=o.default.createElement(o.default.Fragment,null,o.default.createElement(wn,{type:bn,headerText:x},o.default.createElement(vn,{className:"klaviyo-form",isDesignWorkflow:O,formType:f.formType,formTypeDirection:C,overlayColor:_,mobileOverlay:T,modalScale:P,mobileDesktopType:v,isQuickstart:I,isDocked:j},V?o.default.createElement(c.h,null,"Loading..."):o.default.createElement(pn,{closePortal:t,formVersionCId:e})))),N=o.default.createElement(o.default.Fragment,null,o.default.createElement(vn,{className:"klaviyo-form",isDesignWorkflow:O,formType:f.formType,formTypeDirection:f.formTypeDirection,overlayColor:_,modalScale:P,mobileDesktopType:v,isQuickstart:I},V?o.default.createElement(c.h,null,"Loading..."):o.default.createElement(pn,{closePortal:t,formVersionCId:e})));return w?I?N:F:(A=f.formType===d.e&&Object(jt.a)()&&(null==T?void 0:T.enabled),M=o.default.createElement(vn,{className:"klaviyo-form",isDesignWorkflow:O,formType:f.formType,formTypeDirection:C,overlayColor:_,modalScale:P,mobileDesktopType:v,isQuickstart:I},V?o.default.createElement(c.h,null,"Loading..."):o.default.createElement(pn,{closePortal:t,formVersionCId:e})),A?o.default.createElement(yn,{$mobileOverlay:T},M):M);var A,M},xn=n("../forms/src/Constants/defaultTheme/index.ts");function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var Cn=e=>o.default.createElement(l.a,jn({},e,{theme:e=>Object(ce.a)({},e,xn.c)}));var Sn=({formVersionCId:e,node:t})=>{const n=Object(r.b)(),i=Object(r.c)(p.e.isDesignWorkflow);return i&&null===t?null:o.default.createElement(Cn,null,o.default.createElement(a.a,{key:e,defaultOpen:!0,onClose:()=>n(p.u.closeForm({formVersionCId:e})),closeOnEsc:!i,node:i?t:void 0},({closePortal:t,portal:n})=>[n(o.default.createElement(In,{formVersionCId:e,closePortal:i?()=>{}:t}))]))};const kn=Object(l.c)(c.b).withConfig({displayName:"Embed__StyledDiv",componentId:"sc-1h73wx3-0"})(["&&{transform:translate(0,0);}"]);var En=({node:e,formVersionCId:t})=>{const n=Object(r.c)(e=>p.u.openFormVersionSelectById(e,t)),i=e||document.querySelector(`div.klaviyo-form-${n.formId}.form-version-cid-${t}`);return i?Object(o.createPortal)(n.currentViewId?o.default.createElement(Cn,null,n.showErrorView?o.default.createElement(Rt,{isEmbed:!0}):o.default.createElement(kn,null,o.default.createElement(Mt,{formVersionCId:t,formVersionId:n.formVersionId,viewId:n.currentViewId,isEmbed:!0,key:t}))):null,i):null};function $n(){return($n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var _n=()=>{const e=Object(r.c)(p.u.openFormVersionSelectIds),t=Object(r.c)(p.u.getOpenEmbedFormVersionIds);return o.default.createElement(o.Suspense,{fallback:o.default.createElement("div",null)},e.map(e=>{const n={formVersionCId:e};return t.includes(e)?o.default.createElement(En,$n({key:e},n)):o.default.createElement(Sn,$n({key:e},n))}))};t.default=()=>{const e=document.createElement("div");e.setAttribute("id","dynamic-react-root"),document.body.appendChild(e),Object(o.render)(o.default.createElement(r.a,{store:i.a},o.default.createElement(_n,null)),e)}}}]);
